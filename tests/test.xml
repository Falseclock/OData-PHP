<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<edmx:Edmx xmlns="http://docs.oasis-open.org/odata/ns/edm" Version="4.0" xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx">
  <edmx:Reference xmlns:edmx="http://docs.oasis-open.org/odata/odata/v4.0/errata03/os/complete/vocabularies/Org.OData.Core.V1.xml">
    <edmx:Include Namespace="Org.OData.Core.V1" Alias="Core">
      <Annotation Term="Core.DefaultNamespace"/>
    </edmx:Include>
  </edmx:Reference>
  <edmx:DataServices>
    <Schema Namespace="api.mp.kz" xmlns="http://docs.oasis-open.org/odata/ns/edm">
      <EntityType Name="Tender">
        <Key>
          <PropertyRef Name="id"/>
        </Key>
        <Property Name="id" Type="Edm.Int32" DefaultValue="nextval('tenders_tenderid_seq'::regclass)" Nullable="false">
          <Annotation Term="Core.Description">
            <String>Идентификатор тендера, уникальный, серийный</String>
          </Annotation>
        </Property>
        <Property Name="datePublication" Type="Edm.DateTimeOffset" Nullable="false" Precision="6">
          <Annotation Term="Core.Description">
            <String>Дата опубликования тендера. Не путать с датой начало торгов. Публикация может быть раньше, чем начинается торговля</String>
          </Annotation>
        </Property>
        <Property Name="isActive" Type="Edm.Boolean" DefaultValue="true" Nullable="false"/>
        <Annotation Term="Core.Description">
          <String>Таблица тендеров, которая аккумулирует в себя лоты</String>
        </Annotation>
      </EntityType>
      <EntityType Name="TenderLot">
        <Key>
          <PropertyRef Name="id"/>
        </Key>
        <Property Name="id" Type="Edm.Int32" DefaultValue="nextval('auctions_auctionid_seq'::regclass)" Nullable="false">
          <Annotation Term="Core.Description">
            <String>Номер тендерного лота, уникальный, серийный</String>
          </Annotation>
        </Property>
        <Property Name="name" Type="Edm.String" MaxLength="512" Nullable="false">
          <Annotation Term="Core.Description">
            <String>Наименовение лота</String>
          </Annotation>
        </Property>
        <Property Name="description" Type="Edm.String" Nullable="false">
          <Annotation Term="Core.Description">
            <String>Более расширенное описание лота</String>
          </Annotation>
        </Property>
        <Property Name="budget" Type="Edm.Decimal" DefaultValue="0" Nullable="false" Scale="5" Precision="30">
          <Annotation Term="Core.Description">
            <String>Бюджет лота за единицу товара или услуги</String>
          </Annotation>
        </Property>
        <Property Name="quantity" Type="Edm.Decimal" DefaultValue="0" Nullable="false" Scale="5" Precision="22">
          <Annotation Term="Core.Description">
            <String>Количество поставляемых товаров или услуг</String>
          </Annotation>
        </Property>
        <Property Name="dateStart" Type="Edm.DateTimeOffset" DefaultValue="now()" Nullable="false" Precision="6">
          <Annotation Term="Core.Description">
            <String>Дата начала приема заявок по лоту</String>
          </Annotation>
        </Property>
        <Property Name="dateStop" Type="Edm.DateTimeOffset" Nullable="false" Precision="6">
          <Annotation Term="Core.Description">
            <String>Дата окончания приема заявок. Лот может автоматически продлятся и эта дата ответственна за это</String>
          </Annotation>
        </Property>
        <Property Name="fts" Type="Edm.String" Nullable="false">
          <Annotation Term="Core.Description">
            <String>Полнотекстовый поиск по лоту; FIXME: изменить на not null после ввода новой страницы создания лота</String>
          </Annotation>
        </Property>
        <Property Name="isActive" Type="Edm.Boolean" DefaultValue="true" Nullable="false">
          <Annotation Term="Core.Description">
            <String>Статус достуности лота к публичному показу. По сути это статус удаления</String>
          </Annotation>
        </Property>
        <Property Name="stateExplanation" Type="Edm.String" Nullable="false">
          <Annotation Term="Core.Description">
            <String>Комментарий к статусу лота. Обычно устанавливается, когда статус изменяется на невозможный к дальнейшему участию в лоте</String>
          </Annotation>
        </Property>
        <Property Name="typeId" Type="Edm.Int32" Nullable="false">
          <Annotation Term="Core.Description">
            <String>Ссылка на тип лота</String>
          </Annotation>
        </Property>
        <Property Name="stateId" Type="Edm.Int32" Nullable="false">
          <Annotation Term="Core.Description">
            <String>Ссылка на статус лота в тендерах</String>
          </Annotation>
        </Property>
        <Property Name="isPublic" Type="Edm.Boolean" DefaultValue="true" Nullable="false">
          <Annotation Term="Core.Description">
            <String>Доступ к лоту</String>
          </Annotation>
        </Property>
        <Property Name="dateCommit" Type="Edm.DateTimeOffset" Nullable="false" Precision="6"/>
        <NavigationProperty Name="TenderLotState" Type="api.mp.kz.TenderLotState">
          <ReferentialConstraint Property="stateId" ReferencedProperty="id"/>
        </NavigationProperty>
        <NavigationProperty Name="TenderLotType" Type="api.mp.kz.TenderLotType">
          <ReferentialConstraint Property="typeId" ReferencedProperty="id"/>
        </NavigationProperty>
        <NavigationProperty Name="Tender" Type="api.mp.kz.Tender">
          <ReferentialConstraint Property="tenderId" ReferencedProperty="id"/>
        </NavigationProperty>
        <Annotation Term="Core.Description">
          <String>Таблица лотов, которые принадлежат определенному тендеру.; Вниание на опции тендера. Через coalesce проверяется есть ли кастомная опция для лота, затем
            проверяется настройка для компании и потом только берется стандартная настройка
          </String>
        </Annotation>
      </EntityType>
      <EntityType Name="TenderLotState">
        <Key>
          <PropertyRef Name="id"/>
        </Key>
        <Property Name="id" Type="Edm.Int32" DefaultValue="nextval('tender_lot_states_tender_lot_state_id_seq'::regclass)" Nullable="false">
          <Annotation Term="Core.Description">
            <String>Идентификатор статуса лота, уникальный, серийный</String>
          </Annotation>
        </Property>
        <Property Name="name" Type="Edm.String" MaxLength="64" Nullable="false">
          <Annotation Term="Core.Description">
            <String>Название статуса лота тендера</String>
          </Annotation>
        </Property>
        <Property Name="description" Type="Edm.String" MaxLength="512" Nullable="false">
          <Annotation Term="Core.Description">
            <String>Описание статус лота тендера</String>
          </Annotation>
        </Property>
        <Property Name="constant" Type="Edm.String" MaxLength="32" Nullable="false">
          <Annotation Term="Core.Description">
            <String>Константа тендерного лота</String>
          </Annotation>
        </Property>
        <Annotation Term="Core.Description">
          <String>Таблица видов состояний каждого лота тендера</String>
        </Annotation>
      </EntityType>
      <EntityType Name="TenderLotType">
        <Key>
          <PropertyRef Name="id"/>
        </Key>
        <Property Name="id" Type="Edm.Int32" DefaultValue="nextval('tender_lot_types_tender_lot_type_id_seq'::regclass)" Nullable="false">
          <Annotation Term="Core.Description">
            <String>Идентификатор типа тендера, уникальный, серийный</String>
          </Annotation>
        </Property>
        <Property Name="name" Type="Edm.String" MaxLength="64" Nullable="false">
          <Annotation Term="Core.Description">
            <String>Наименование типа тендера</String>
          </Annotation>
        </Property>
        <Property Name="description" Type="Edm.String" MaxLength="512" Nullable="false">
          <Annotation Term="Core.Description">
            <String>Описание типа торга в лота</String>
          </Annotation>
        </Property>
        <Property Name="constant" Type="Edm.String" MaxLength="32" Nullable="false">
          <Annotation Term="Core.Description">
            <String>Константа типа тендерного лота</String>
          </Annotation>
        </Property>
        <Annotation Term="Core.Description">
          <String>Типы закупа в тендерных лотах</String>
        </Annotation>
      </EntityType>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
